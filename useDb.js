// @bun
import{MongoClient as w,ServerApiVersion as x} from"mongodb";async function E(f=process.env.MONGO_URI||"mongodb://localhost:27017",j=process.env.MONGO_DB||"bunt"){T=new w(f,{serverApi:{version:x.v1,strict:!0}}),await T.connect(),console.log("db connected"),y=T.db(j);const q=await y.listCollections({type:"collection"},{nameOnly:!0}).toArray();for(let k of q)h[k.name]=y.collection(k.name);return T}async function F(f,j){if(!y)throw new Error("Either client not connected or Database not found");if(!h[f])h[f]=await y.createCollection(f,{validator:j});return h[f]}var h={},T=null,y=null;export{y as db,E as connect,T as client,F as Model};
